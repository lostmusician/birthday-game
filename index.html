<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday!</title>
  <style>
    body { margin: 0; background: #d0f4f7; font-family: sans-serif; }
    canvas { display: block; margin: 0 auto; background: #a2d5c6; }
    #dialogue { text-align: center; padding: 10px; font-size: 18px; background: #fff8dc; display: none; }
  </style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<div id="dialogue"></div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const player = { x: 100, y: 100, color: 'pink' }; // girlfriend
const buddy = { x: 400, y: 300, color: 'blue' };  // you
const chest = { x: 600, y: 100 };
let showDialogue = false;
let memoryRevealed = false;

const dialogueBox = document.getElementById('dialogue');

// Handle movement
const keys = {};
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

function drawCharacter(char, label) {
  ctx.fillStyle = char.color;
  ctx.fillRect(char.x, char.y, 40, 40);
  ctx.fillStyle = 'black';
  ctx.fillText(label, char.x, char.y - 10);
}

function drawChest() {
  ctx.fillStyle = 'gold';
  ctx.fillRect(chest.x, chest.y, 50, 30);
  ctx.fillStyle = 'black';
  ctx.fillText("üéÅ", chest.x + 10, chest.y + 20);
}

function distance(a, b) {
  return Math.sqrt((a.x - b.x) ** 2 + (a.y - b.y) ** 2);
}

function update() {
  if (keys['ArrowUp']) player.y -= 3;
  if (keys['ArrowDown']) player.y += 3;
  if (keys['ArrowLeft']) player.x -= 3;
  if (keys['ArrowRight']) player.x += 3;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawCharacter(player, "You üíñ");
  drawCharacter(buddy, "Me üòä");
  drawChest();

  if (distance(player, buddy) < 60 && !showDialogue) {
    showDialogue = true;
    dialogueBox.innerText = "Hey love! I'm so happy you're here üåü";
    dialogueBox.style.display = 'block';
  }

  if (distance(player, chest) < 60 && !memoryRevealed) {
    memoryRevealed = true;
    dialogueBox.innerText = "üéâ Memory Unlocked: Remember our picnic at the park with that surprise cake? üç∞";
    dialogueBox.style.display = 'block';
  }

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>